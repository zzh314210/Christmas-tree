version: "3.8"

services:
  christmas-tree:
    build:
      context: .
      # 关键修改：将 API_KEY 作为构建参数传入，
      # 这样 Vite build 时才能把 Key 写入静态 JS 文件中。
      args:
        - API_KEY=${API_KEY}
    container_name: christmas-tree-app
    restart: always
    ports:
      - "8000:8000"
    volumes:
      - /app/node_modules
    # 运行时环境变量（可选，Vite 静态站主要靠 build args）
    environment:
      - API_KEY=${API_KEY}
